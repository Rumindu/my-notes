# Creating Database Tables

<!-- omit from toc -->

## Table of Contents

- [Table of Contents](#table-of-contents)
- [Database Table Creation Overview](#database-table-creation-overview)
- [Creation Methods](#creation-methods)
  - [Manual SQL Approach](#manual-sql-approach)
  - [Visual Design Tools](#visual-design-tools)
- [Setting Up Database Connection](#setting-up-database-connection)
  - [Adding MySQL Data Source](#adding-mysql-data-source)
  - [Connection Configuration](#connection-configuration)
  - [Testing Connection](#testing-connection)
- [Creating Database Schema](#creating-database-schema)
- [Creating the Users Table](#creating-the-users-table)
  - [Table Structure Definition](#table-structure-definition)
  - [Column Configuration](#column-configuration)
  - [Primary Key Setup](#primary-key-setup)
- [Creating the Addresses Table](#creating-the-addresses-table)
  - [Table Relationship Design](#table-relationship-design)
  - [Address Column Definition](#address-column-definition)
  - [Foreign Key Configuration](#foreign-key-configuration)
- [SQL Preview and Validation](#sql-preview-and-validation)
- [Key Points](#key-points)
- [Links/References](#linksreferences)

## Database Table Creation Overview

- **Two approaches**: Manual SQL statements or visual design tools
- **SQL control**: Manual approach provides complete control over schema
- **Visual convenience**: Design tools offer intuitive table creation
- **Skill flexibility**: Choose method based on SQL comfort level

![Database Table Creation Approaches](assets/database-table-creation-approaches.png)

**Method selection criteria:**
- SQL expertise level
- Visual preference
- Team collaboration needs
- Tool availability

## Creation Methods

### Manual SQL Approach

- **Full control**: Complete control over database schema design
- **SQL expertise**: Requires comfort with SQL DDL statements
- **Precision**: Exact specification of all table attributes
- **Professional preference**: Often preferred by experienced database developers

![Manual SQL Table Creation](assets/manual-sql-table-creation.png)

**Manual approach benefits:**
- Precise control over all schema details
- Direct SQL statement creation
- Version control friendly
- Database-agnostic portability

### Visual Design Tools

- **IntelliJ Ultimate**: Built-in database design tools
- **Alternative option**: MySQL Workbench (free alternative)
- **Visual approach**: Drag-and-drop table creation
- **Beginner-friendly**: Easier for those less comfortable with SQL

![Visual Database Design Tools](assets/visual-database-design-tools.png)

**Tool options:**
- **IntelliJ Ultimate**: Integrated database window
- **MySQL Workbench**: Free standalone tool available at mysql.com/products/workbench
- **Course choice**: Using IntelliJ for easier workflow integration

## Setting Up Database Connection

### Adding MySQL Data Source

- **Database window**: Located on right side of IntelliJ Ultimate
- **Data source setup**: Add new MySQL connection
- **Tool integration**: Seamless connection to MySQL server

![IntelliJ Database Window](assets/intellij-database-window.png)

**Connection setup steps:**
- Open Database window in IntelliJ
- Click "+" to add new data source
- Select MySQL from available options
- Configure connection parameters

### Connection Configuration

```yaml
# Connection parameters to configure:
Host: localhost
Port: 3306
User: root
Password: your_mysql_password
```

![MySQL Data Source Configuration](assets/mysql-datasource-configuration-dialog.png)

**Configuration details:**
- **Host**: `localhost` for local development
- **Port**: `3306` (default MySQL port)
- **User**: `root` for administrative access
- **Password**: Use password set during MySQL installation

**Driver installation:**
- **First-time setup**: May show "missing driver files" message
- **Automatic download**: Click message to download MySQL drivers
- **Connection test**: Verify setup with "Test Connection" button

![MySQL Driver Download Prompt](assets/mysql-driver-download-prompt.png)

### Testing Connection

- **Test connection**: Verify database connectivity
- **Success confirmation**: "Connection successful" message
- **Ready to proceed**: Connection established with MySQL server

![Successful Database Connection Test](assets/successful-database-connection-test.png)

## Creating Database Schema

- **Schema creation**: Right-click connection node
- **New schema**: Select "New" → "Schema"
- **Database name**: Set to "store" for e-commerce application
- **Schema confirmation**: Click OK to create database

![Database Schema Creation Dialog](assets/database-schema-creation-dialog.png)

**Schema setup:**
- Right-click on MySQL connection
- Choose "New" → "Schema"
- Name: `store`
- Confirm creation

## Creating the Users Table

### Table Structure Definition

- **Table creation**: Right-click database → New → Table
- **Table name**: `users`
- **Purpose**: Store user account information
- **Design approach**: Follow relational database best practices

![Users Table Creation Dialog](assets/users-table-creation-dialog.png)

### Column Configuration

```sql
-- Users table structure
CREATE TABLE users (
    id BIGINT NOT NULL AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL
);
```

![Users Table Column Configuration](assets/users-table-column-configuration.png)

**Column specifications:**
- **ID column**: 
  - Type: `BIGINT` for large user capacity
  - Constraints: `NOT NULL`, `AUTO_INCREMENT`
  - Purpose: Primary key for unique identification

- **Name column**:
  - Type: `VARCHAR(255)` for standard string length
  - Constraint: `NOT NULL`
  - Purpose: User's display name

- **Email column**:
  - Type: `VARCHAR(255)` 
  - Constraint: `NOT NULL`
  - Purpose: User's email address

- **Password column**:
  - Type: `VARCHAR(255)`
  - Constraint: `NOT NULL` 
  - Purpose: Encrypted password storage

### Primary Key Setup

- **Key creation**: Right-click "Keys" node → Add Primary Key
- **Default name**: Accept generated primary key name
- **Column selection**: Add ID column to primary key
- **Key validation**: Double-click to confirm column selection

![Primary Key Configuration](assets/primary-key-configuration-dialog.png)

## Creating the Addresses Table

### Table Relationship Design

- **Relationship type**: One-to-Many (User → Addresses)
- **Business rule**: Each user can have zero or more addresses
- **Foreign key**: Links addresses to specific users
- **Data integrity**: Ensures address ownership

![User Addresses Relationship Diagram](assets/user-addresses-relationship-diagram.png)

### Address Column Definition

```sql
-- Addresses table structure
CREATE TABLE addresses (
    id BIGINT NOT NULL AUTO_INCREMENT,
    street VARCHAR(255) NOT NULL,
    city VARCHAR(255) NOT NULL,
    zip VARCHAR(255) NOT NULL,
    user_id BIGINT NOT NULL
);
```

![Addresses Table Column Setup](assets/addresses-table-column-setup.png)

**Address column specifications:**
- **ID column**: `BIGINT`, `NOT NULL`, `AUTO_INCREMENT`
- **Street column**: `VARCHAR(255)`, `NOT NULL`
- **City column**: `VARCHAR(255)`, `NOT NULL` 
- **Zip column**: `VARCHAR(255)`, `NOT NULL`
- **User_ID column**: `BIGINT`, `NOT NULL` (foreign key)

**Design consistency:**
- Standard `VARCHAR(255)` length for string columns
- Consistent data types across related tables
- Simplified maintenance approach

### Foreign Key Configuration

- **Foreign key creation**: Right-click "Keys" → Add Foreign Key
- **Column mapping**: user_id → users.id
- **Target table**: Select `users` table
- **Target column**: Select `id` column from users table

![Foreign Key Configuration Dialog](assets/foreign-key-configuration-dialog.png)

**Foreign key setup steps:**
1. Add foreign key constraint
2. Select source column: `user_id`
3. Choose target table: `users`
4. Select target column: `id`
5. Confirm relationship mapping

![Foreign Key Relationship Mapping](assets/foreign-key-relationship-mapping.png)

## SQL Preview and Validation

- **SQL generation**: Visual tool generates corresponding SQL statements
- **Preview available**: View SQL before execution
- **Validation tool**: Verify table structure before creation
- **Later reference**: SQL statements available for migration scripts

![Generated SQL Preview](assets/generated-sql-preview.png)

**SQL preview benefits:**
- Validate table structure before creation
- Learn SQL syntax from visual design
- Copy SQL for version control
- Prepare for migration scripting

## Key Points

- **Main takeaway**: Database tables can be created using either manual SQL statements or visual design tools, with choice depending on SQL comfort level and team preferences
- **Tool flexibility**: IntelliJ Ultimate provides integrated database design tools, while MySQL Workbench offers free alternative for visual table creation
- **Connection setup**: Proper MySQL data source configuration essential for database operations within development environment
- **Schema organization**: Creating dedicated database schema (`store`) provides logical separation for application data
- **Table design**: Users table stores core account information with BIGINT primary key for scalability
- **Relationship implementation**: One-to-many relationship between users and addresses implemented through foreign key constraint
- **Data type consistency**: Using standard VARCHAR(255) length across string columns simplifies application maintenance
- **Primary key best practices**: AUTO_INCREMENT BIGINT primary keys provide unique identification and accommodate growth
- **Foreign key integrity**: Proper foreign key configuration ensures referential integrity between related tables
- **SQL preview value**: Generated SQL statements provide learning opportunity and foundation for database versioning

## Links/References

- Video: 4.6.1-Creating-Database-Tables.mp4 (05:49)
- Tool: [MySQL Workbench](https://mysql.com/products/workbench) (free alternative)
- Previous: [Creating the Database - Segment Introduction](4.6.0-Creating-the-Database.md)
- Next: Database Versioning Concepts

---

**Created**: July 31, 2025  
**Last Modified**: July 31, 2025
