# Debugging Spring Boot Applications

<!-- omit from toc -->
## Table of Contents
- [Introduction to Debugging](#introduction-to-debugging)
- [Creating a Bug for Demonstration](#creating-a-bug-for-demonstration)
  - [Modifying HomeController:](#modifying-homecontroller)
  - [Bug Explanation:](#bug-explanation)
  - [Testing the Bug:](#testing-the-bug)
- [Method 1: Print Statement Debugging](#method-1-print-statement-debugging)
  - [Adding Print Statements:](#adding-print-statements)
  - [Running with Print Output:](#running-with-print-output)
  - [Print Statement Benefits:](#print-statement-benefits)
  - [Print Statement Limitations:](#print-statement-limitations)
- [Method 2: IntelliJ Debugger](#method-2-intellij-debugger)
  - [Setting Breakpoints:](#setting-breakpoints)
  - [Starting Debug Mode:](#starting-debug-mode)
  - [Debug Session Startup:](#debug-session-startup)
- [Debugger Controls and Navigation](#debugger-controls-and-navigation)
  - [Triggering Breakpoint:](#triggering-breakpoint)
  - [Debug Control Buttons:](#debug-control-buttons)
- [Variables and Expressions Monitoring](#variables-and-expressions-monitoring)
  - [Variables Panel:](#variables-panel)
  - [Adding Custom Expressions:](#adding-custom-expressions)
  - [Expression Management:](#expression-management)
- [Stepping Through Code](#stepping-through-code)
  - [Step Over Example:](#step-over-example)
  - [Step Into Method:](#step-into-method)
  - [Debugging Method Implementation:](#debugging-method-implementation)
  - [Framework Code Navigation:](#framework-code-navigation)
- [Best Practices](#best-practices)
  - [Breakpoint Management:](#breakpoint-management)
  - [Bug Fixing Process:](#bug-fixing-process)
  - [Final Bug Fix:](#final-bug-fix)
  - [Cleanup Steps:](#cleanup-steps)
- [Key Points](#key-points)
- [Links/References](#linksreferences)

## Introduction to Debugging
- **Reality check**: Even experienced developers write bugs
- **John Smith myth**: No one writes bug-free code
- **Essential skill**: Debugging is part of development process
- **Multiple techniques**: Print statements, IDE debuggers, logging
![Debugging Introduction Concept](assets/debugging-introduction-concept.png)

## Creating a Bug for Demonstration
### Modifying HomeController:
```java
@Controller
public class HomeController {
    
    private String getViewName() {
        return "index";  // Missing .html extension
    }
    
    @RequestMapping("/")
    public String index() {
        String viewName = getViewName();
        return viewName;
    }
}
```
![HomeController Bug Code](assets/home-controller-bug-demonstration.png)

### Bug Explanation:
- **Missing extension**: Returning "index" instead of "index.html"
- **Result**: 404 error when accessing homepage
- **Deliberate**: Created for debugging demonstration

### Testing the Bug:
1. **Restart application**: `Ctrl+R` in IntelliJ
2. **Process running dialog**: Choose to stop and restart
3. **Browser refresh**: Shows error page
![Application Restart Dialog](assets/intellij-restart-application-dialog.png)

![Browser Error Page](assets/browser-404-error-missing-view.png)

## Method 1: Print Statement Debugging
### Adding Print Statements:
```java
@RequestMapping("/")
public String index() {
    String viewName = getViewName();
    System.out.println(viewName);  // Debug output
    return viewName;
}
```
![Print Statement Debug Code](assets/print-statement-debug-code.png)

### Running with Print Output:
1. **Restart application**
2. **Refresh browser**
3. **Check console**: Look for printed values
![Console Print Output](assets/console-print-statement-output.png)

### Print Statement Benefits:
- **Simple**: Easy to add and understand
- **Quick**: Fast debugging for simple issues
- **Universal**: Works in any IDE or text editor

### Print Statement Limitations:
- **Messy**: Can clutter code and console
- **Manual cleanup**: Must remember to remove
- **Limited info**: Only shows what you explicitly print

## Method 2: IntelliJ Debugger
### Setting Breakpoints:
- **Location**: Click left margin next to line number
- **Visual indicator**: Red dot appears
- **Toggle**: Click again to remove
![Setting Breakpoint](assets/intellij-setting-breakpoint.png)

### Starting Debug Mode:
- **Debug button**: Click debug icon (bug symbol)
- **Keyboard shortcut**: `Ctrl+D`
- **Alternative**: Right-click → Debug
![IntelliJ Debug Button](assets/intellij-debug-button-toolbar.png)

### Debug Session Startup:
- **Server starts**: Application runs in debug mode
- **Port binding**: Still uses port 8080
- **Ready state**: Waiting for breakpoint hits
![Debug Mode Console Output](assets/debug-mode-console-startup.png)

## Debugger Controls and Navigation
### Triggering Breakpoint:
1. **Browser refresh**: Navigate to localhost:8080
2. **Execution pauses**: At breakpoint line
3. **Debug panel**: Opens at bottom of IntelliJ
![Breakpoint Hit Debug Panel](assets/breakpoint-hit-debug-panel.png)

### Debug Control Buttons:
![Debug Control Buttons](assets/debug-control-buttons-toolbar.png)

**Step Over (F8)**:
- **Function**: Execute current line, stay in same method
- **Use case**: Skip over method calls
- **Shortcut**: F8

**Step Into (F7)**:
- **Function**: Enter method calls to debug inside
- **Use case**: Investigate method implementations
- **Shortcut**: F7

**Resume Program (Option+Cmd+R on Mac)**:
- **Function**: Continue execution until next breakpoint
- **Use case**: Skip through framework code
- **Result**: Complete execution or hit next breakpoint

## Variables and Expressions Monitoring
### Variables Panel:
- **Automatic detection**: Shows variables in current scope
- **Current object**: `this` reference to HomeController
- **Local variables**: Method variables and parameters
![Variables Panel Debug View](assets/variables-panel-debug-view.png)

### Adding Custom Expressions:
1. **Plus button**: Add expression manually
2. **Expression input**: Type variable name or expression
3. **Live evaluation**: Shows current value
![Custom Expression Debug](assets/custom-expression-debug-panel.png)

### Expression Management:
- **Add expressions**: Monitor specific values
- **Remove expressions**: Clean up when done
- **Live updates**: Values update as code executes

## Stepping Through Code
### Step Over Example:
```java
String viewName = getViewName();  // ← Breakpoint here
System.out.println(viewName);     // Press F8 to execute
return viewName;                  // Press F8 again
```
![Step Over Execution](assets/step-over-execution-example.png)

### Step Into Method:
1. **Position**: Breakpoint at method call
2. **Step Into (F7)**: Enter getViewName() method
3. **Inside method**: Debug method implementation
![Step Into Method Debug](assets/step-into-method-debug.png)

### Debugging Method Implementation:
```java
private String getViewName() {
    return "index";  // ← Now debugging inside method
}
```

### Framework Code Navigation:
- **Spring internals**: May step into Spring Framework code
- **Decompiled classes**: Shows framework implementation
- **Resume recommended**: Use resume to skip framework code
![Spring Framework Decompiled Code](assets/spring-framework-decompiled-code.png)

## Best Practices
### Breakpoint Management:
- **Remove after use**: Clean up breakpoints when debugging complete
- **Strategic placement**: Set breakpoints at key decision points
- **Avoid clutter**: Too many breakpoints slow development

### Bug Fixing Process:
1. **Identify issue**: Reproduce the bug
2. **Set breakpoints**: At suspected problem areas
3. **Step through**: Use appropriate stepping commands
4. **Monitor variables**: Check values at each step
5. **Fix and test**: Correct issue and verify fix

### Final Bug Fix:
```java
private String getViewName() {
    return "index.html";  // ← Fixed: Added .html extension
}
```
![Bug Fix Implementation](assets/bug-fix-html-extension.png)

### Cleanup Steps:
1. **Stop debugger**: Click stop button
2. **Remove breakpoints**: Click red dots to remove
3. **Clean code**: Remove debug print statements
![Removing Breakpoints](assets/removing-breakpoints-cleanup.png)

## Key Points
- **Multiple approaches**: Print statements vs IDE debugger
- **Print statements**: Quick but limited debugging method
- **IDE debugger**: Powerful tool for complex debugging
- **Breakpoints**: Pause execution at specific lines
- **Stepping controls**: Navigate through code execution (F7, F8)
- **Variable monitoring**: Watch values change during execution
- **Framework code**: Use resume to skip Spring internals
- **Cleanup important**: Remove breakpoints and debug code when done
- **Best practice**: Combine debugging techniques as needed

## Links/References
- Video: 2.9-Debugging-Spring-Boot-Applications.mp4 (5m 54s)
- Previous: [Running Spring Boot Applications](2.8-Running-Spring-Boot-Applications.md)
- Next: Spring Boot Auto-Configuration

---
**Created**: July 30, 2025  
**Last Modified**: July 30, 2025
