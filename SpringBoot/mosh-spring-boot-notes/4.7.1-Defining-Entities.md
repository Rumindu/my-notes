# Defining Entities

<!-- omit from toc -->

## Table of Contents

- [Entity Definition Overview](#entity-definition-overview)
- [Project Cleanup](#project-cleanup)
- [Creating Entity Package Structure](#creating-entity-package-structure)
- [Creating the User Entity](#creating-the-user-entity)
  - [Basic Entity Setup](#basic-entity-setup)
  - [Primary Key Configuration](#primary-key-configuration)
  - [Entity Field Definition](#entity-field-definition)
- [Entity Customization](#entity-customization)
  - [Table Name Mapping](#table-name-mapping)
  - [Column Name Mapping](#column-name-mapping)
- [Generating Getters and Setters](#generating-getters-and-setters)
- [Code Organization](#code-organization)
- [Key Points](#key-points)
- [Links/References](#linksreferences)

## Entity Definition Overview

- **Entity concept**: Java class that represents a database table
- **Instance mapping**: Each object instance represents a row in database
- **Object-oriented advantage**: Work with Java objects instead of raw SQL
- **JPA foundation**: Entities form the core of Java Persistence API

![Entity to Table Mapping Concept](assets/entity-table-mapping-concept.png)

**Entity benefits:**
- Object-oriented database interaction
- Type-safe data operations
- Reduced SQL boilerplate code
- Automatic persistence management

## Project Cleanup

- **Class removal**: Delete unnecessary generated classes
- **Keep essential**: Preserve only `StoreApplication` main class
- **Clean workspace**: Remove clutter for focused development

![Project Cleanup Before and After](assets/project-cleanup-before-after.png)

**Cleanup steps:**
1. Select all classes except `StoreApplication`
2. Hold Cmd (Mac) or Ctrl (Windows) to deselect main class
3. Delete selected classes
4. Confirm clean project structure

## Creating Entity Package Structure

- **Package creation**: Add new package for entity organization
- **Package naming**: Use `entities` (alternatives: `models`, `domain`)
- **Logical separation**: Group related domain classes together
- **Best practices**: Maintain clear package structure

![Entity Package Creation](assets/entity-package-creation.png)

**Package organization:**
- **entities**: Contains JPA entity classes
- **Alternative names**: `models`, `domain` (all valid choices)
- **Course standard**: Using `entities` package name

## Creating the User Entity

### Basic Entity Setup

```java
package com.store.entities;

import jakarta.persistence.Entity;

@Entity
public class User {
    // Entity fields will be added here
}
```

![User Entity Class Creation](assets/user-entity-class-creation.png)

**Entity annotation:**
- **@Entity**: Marks class as JPA entity
- **Jakarta Persistence**: Part of JPA specification
- **Hibernate**: Most popular JPA implementation
- **Error indication**: Missing primary key warning appears

### Primary Key Configuration

```java
@Entity
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
}
```

![Primary Key Configuration](assets/primary-key-configuration.png)

**Primary key setup:**
- **@Id**: Designates primary key field
- **@GeneratedValue**: Specifies ID generation strategy
- **IDENTITY strategy**: Uses database AUTO_INCREMENT feature
- **Long type**: Accommodates large ID values

### Entity Field Definition

```java
@Entity
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String name;
    private String email;
    private String password;
}
```

![Entity Field Definition](assets/entity-field-definition.png)

**Field mapping:**
- **Database columns**: id, name, email, password
- **Java fields**: Corresponding private fields in entity
- **Data types**: Long for ID, String for text columns
- **IntelliJ assistance**: Smart field name suggestions

## Entity Customization

### Table Name Mapping

```java
@Entity
@Table(name = "users")
public class User {
    // Entity fields
}
```

![Table Name Mapping](assets/table-name-mapping.png)

**Table customization:**
- **@Table annotation**: Specifies database table name
- **Convention vs explicit**: Entity name vs actual table name
- **Plural naming**: Database table "users" vs entity "User"
- **Best practice**: Explicit mapping prevents naming issues

### Column Name Mapping

```java
@Entity
@Table(name = "users")
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id", nullable = false)
    private Long id;
    
    @Column(name = "name", nullable = false)
    private String name;
    
    @Column(name = "email", nullable = false)
    private String email;
    
    @Column(name = "password", nullable = false)
    private String password;
}
```

![Column Name Mapping](assets/column-name-mapping.png)

**Column mapping benefits:**
- **@Column annotation**: Explicit column name specification
- **Field rename safety**: Database schema independence
- **Nullable constraints**: Match database column constraints
- **Maintenance protection**: Prevents schema coupling issues

**Mapping considerations:**
- Explicit mapping prevents field rename breakage
- Database schema modifications affect multiple applications
- Column annotations provide clear database mapping
- IntelliJ suggests nullable=false based on schema

## Generating Getters and Setters

- **Access methods**: Generate getter and setter methods
- **IDE assistance**: Use IntelliJ generate menu
- **Bulk generation**: Select all fields simultaneously
- **Standard practice**: Required for JPA entity access

![Generate Getters and Setters Dialog](assets/generate-getters-setters-dialog.png)

**Generation steps:**
1. Right-click in class â†’ Generate
2. Select "Getter and Setter"
3. Hold Shift + Down arrow to select all fields
4. Press Enter to generate methods

![Generated Getters and Setters](assets/generated-getters-setters.png)

## Code Organization

- **Code rearrangement**: Organize fields and methods logically
- **IntelliJ action**: Use "Rearrange Code" command
- **Access method**: Shift+Cmd+A (Mac) or Shift+Ctrl+A (Windows)
- **Professional structure**: Fields first, then accessor methods

![Code Rearrangement Before](assets/code-rearrangement-before.png)

**Rearrangement process:**
1. Open Find Action dialog (Shift+Cmd+A / Shift+Ctrl+A)
2. Search for "rearrange code"
3. Press Enter to execute
4. Code automatically organized

![Code Rearrangement After](assets/code-rearrangement-after.png)

**Organized structure:**
- All fields grouped at top of class
- All getters and setters grouped below
- Clean, professional code layout
- Improved readability and maintenance

## Key Points

- **Main takeaway**: JPA entities are Java classes that map to database tables, enabling object-oriented database operations instead of raw SQL manipulation
- **Entity annotation**: @Entity annotation from Jakarta Persistence API marks classes as persistent entities managed by Hibernate
- **Primary key requirement**: Every JPA entity must have a primary key field annotated with @Id and typically @GeneratedValue for auto-increment behavior
- **Explicit mapping**: Use @Table and @Column annotations to explicitly map entity names and field names to database table and column names
- **Field independence**: Explicit column mapping prevents application breakage when Java field names change, maintaining database schema independence
- **Generation strategy**: GenerationType.IDENTITY works with AUTO_INCREMENT database columns for automatic primary key generation
- **Accessor methods**: JPA entities require getter and setter methods for field access, easily generated using IDE tools
- **Code organization**: Use IDE rearrangement features to maintain clean code structure with fields grouped before methods
- **Package structure**: Organize entities in dedicated packages (entities, models, or domain) for logical separation and maintainability
- **Best practices**: Explicit mapping annotations provide clarity and prevent naming convention dependencies that could break applications

## Links/References

- Video: 4.7.1-Defining-Entities.mp4 (05:58)
- Previous: [Creating the Domain Model - Introduction](4.7.0-Creating-the-Domain-Model.md)
- Next: Entity Relationships and Mappings

---

**Created**: July 31, 2025  
**Last Modified**: July 31, 2025
