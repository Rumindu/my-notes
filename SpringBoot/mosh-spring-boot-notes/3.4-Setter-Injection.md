# Setter Injection

<!-- omit from toc -->
## Table of Contents

- [Setter Injection Overview](#setter-injection-overview)
- [Implementing Setter Injection](#implementing-setter-injection)
  - [Generating Setter Method](#generating-setter-method)
  - [Using IntelliJ Generate Menu](#using-intellij-generate-menu)
  - [Moving Generated Code](#moving-generated-code)
- [Using Setter Injection](#using-setter-injection)
  - [Setting Dependencies](#setting-dependencies)
  - [Removing Constructor Dependency](#removing-constructor-dependency)
  - [Clean Implementation](#clean-implementation)
- [Problems with Setter Injection](#problems-with-setter-injection)
  - [Null Pointer Exception Risk](#null-pointer-exception-risk)
  - [Missing Dependency Problem](#missing-dependency-problem)
- [When to Use Setter Injection](#when-to-use-setter-injection)
- [Constructor vs Setter Injection](#constructor-vs-setter-injection)
  - [Constructor Injection (Recommended)](#constructor-injection-recommended)
  - [Setter Injection](#setter-injection-1)
- [Key Points](#key-points)
- [Links/References](#linksreferences)

## Setter Injection Overview

- **Alternative approach**: Another way to inject dependencies into a class
- **Method**: Uses setter methods to provide dependencies
- **Flexibility**: Allows changing dependencies after object creation
- **Use case**: Best suited for optional dependencies

![Setter Injection Concept](assets/setter-injection-concept.png)

## Implementing Setter Injection

### Generating Setter Method

**Manual approach**: Write setter method by hand
**IntelliJ approach**: Use IDE code generation features

```java
public class OrderService {
    private PaymentService paymentService;
    
    // Setter method for dependency injection
    public void setPaymentService(PaymentService paymentService) {
        this.paymentService = paymentService;
    }
}
```

![Setter Method Implementation](assets/setter-method-implementation.png)

### Using IntelliJ Generate Menu

**Steps to generate setter:**
1. **Position cursor**: Place on field name (`paymentService`)
2. **Open generate menu**: `Cmd+N` (Mac) or `Ctrl+N` (Windows)
3. **Select setter**: Choose "Setter" from context menu
4. **Confirm**: Press Enter and proceed

![IntelliJ Generate Context Menu](assets/intellij-generate-context-menu.png)

**Generated code result:**
```java
public void setPaymentService(PaymentService paymentService) {
    this.paymentService = paymentService;
}
```

![Generated Setter Method](assets/generated-setter-method.png)

### Moving Generated Code

**Problem**: IntelliJ places generated code at the top of class
**Convention**: Getters and setters should be at the bottom of class

**Moving code shortcut:**
1. **Position cursor**: Place on method declaration (first line)
2. **Move method**: `Shift+Cmd` (Mac) or `Shift+Ctrl` (Windows) + Arrow keys
3. **Navigate**: Use up/down arrows to move method around

![Moving Generated Code](assets/moving-generated-code.png)

**Final position**: Setter method moved to bottom of class

![Setter Method Final Position](assets/setter-method-final-position.png)

## Using Setter Injection

### Setting Dependencies

```java
public static void main(String[] args) {
    OrderService orderService = new OrderService(new StripePaymentService());
    
    // Use setter to inject PayPal instead
    orderService.setPaymentService(new PayPalPaymentService());
    orderService.placeOrder();
}
```

![Using Setter for Dependency Injection](assets/using-setter-dependency-injection.png)

**Issue**: Passing payment service twice (constructor and setter) looks ugly

### Removing Constructor Dependency

**Solution**: Remove payment service from constructor to clean up code

```java
public class OrderService {
    private PaymentService paymentService;
    
    // Constructor without dependency parameter
    public OrderService() {
        // No parameters needed
    }
    
    public void setPaymentService(PaymentService paymentService) {
        this.paymentService = paymentService;
    }
}
```

**Commenting out constructor:**
- **Shortcut**: `Cmd+/` (Mac) or `Ctrl+/` (Windows)
- **Result**: Constructor is commented out or removed

![Removing Constructor Dependency](assets/removing-constructor-dependency.png)

### Clean Implementation

```java
public static void main(String[] args) {
    OrderService orderService = new OrderService(); // No constructor parameters
    orderService.setPaymentService(new PayPalPaymentService()); // Set via setter
    orderService.placeOrder();
}
```

![Clean Setter Injection Implementation](assets/clean-setter-injection-implementation.png)

## Problems with Setter Injection

### Null Pointer Exception Risk

**The problem**: What if we forget to set the payment service?

```java
public static void main(String[] args) {
    OrderService orderService = new OrderService();
    // Forgot to call setPaymentService()
    orderService.placeOrder(); // This will crash!
}
```

![Forgot to Set Dependency](assets/forgot-to-set-dependency.png)

### Missing Dependency Problem

**Runtime crash**: Application crashes with null pointer exception
**Root cause**: Payment service field is null when `placeOrder()` tries to use it
**Error type**: `NullPointerException` at runtime

![Null Pointer Exception Error](assets/null-pointer-exception-error.png)

**Error demonstration**: Running application without setting payment service results in crash

## When to Use Setter Injection

- **Optional dependencies**: Use setter injection for dependencies that are not required
- **Class functionality**: Order service should be able to work without the dependency
- **Payment service case**: Payment service is NOT optional - it's required for order processing
- **Wrong use case**: Using setter injection for required dependencies doesn't make sense

![When to Use Setter Injection](assets/when-to-use-setter-injection.png)

## Constructor vs Setter Injection

### Constructor Injection (Recommended)
- **For**: Required dependencies
- **Benefits**: Ensures dependencies are provided at creation time
- **Safety**: No risk of null pointer exceptions
- **Immutability**: Dependencies cannot be changed after object creation

### Setter Injection
- **For**: Optional dependencies only
- **Benefits**: Allows changing dependencies after creation
- **Risk**: Null pointer exceptions if dependencies not set
- **Flexibility**: Can modify dependencies at runtime

![Constructor vs Setter Injection Comparison](assets/constructor-vs-setter-injection-comparison.png)

**Recommendation**: Constructor injection is more common and recommended approach

## Key Points

- **Main takeaway**: Setter injection is an alternative to constructor injection but should only be used for optional dependencies
- **When to use**: For dependencies that a class can function without
- **When NOT to use**: For required dependencies like payment services in an order processing system
- **Safety concern**: Setter injection risks null pointer exceptions if dependencies aren't set
- **IntelliJ features**: IDE provides excellent support for generating setters and moving code
- **Code organization**: Follow conventions by placing getters/setters at bottom of class
- **Best practice**: Constructor injection is the recommended approach for most scenarios
- **Runtime flexibility**: Setter injection allows changing dependencies after object creation
- **Design consideration**: Choose injection method based on whether dependency is required or optional

## Links/References

- Video: 3.4-Setter-Injection.mp4 (2m 39s)
- Previous: [Constructor Injection](3.3-Constructor-Injection.md)
- Next: Field Injection

---

**Created**: July 30, 2025  
**Last Modified**: July 30, 2025
